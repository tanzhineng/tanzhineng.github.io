<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>MySQL千万级别数据添加字段或索引导致锁表的处理 | tanzhineng</title><meta name="author" content="谭智能"><meta name="copyright" content="谭智能"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="有东西被加密了，请输入密码查看。">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL千万级别数据添加字段或索引导致锁表的处理">
<meta property="og:url" content="https://tanzhineng.github.io/2024/07/02/MySQL%E5%8D%83%E4%B8%87%E7%BA%A7%E5%88%AB%E6%95%B0%E6%8D%AE%E6%B7%BB%E5%8A%A0%E5%AD%97%E6%AE%B5%E6%88%96%E7%B4%A2%E5%BC%95%E5%AF%BC%E8%87%B4%E9%94%81%E8%A1%A8%E7%9A%84%E5%A4%84%E7%90%86/index.html">
<meta property="og:site_name" content="tanzhineng">
<meta property="og:description" content="有东西被加密了，请输入密码查看。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://tanzhineng.github.io/img/touxiang.png">
<meta property="article:published_time" content="2024-07-01T16:14:00.000Z">
<meta property="article:modified_time" content="2024-07-14T11:40:19.892Z">
<meta property="article:author" content="谭智能">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tanzhineng.github.io/img/touxiang.png"><link rel="shortcut icon" href="/img/tubiao.jpg"><link rel="canonical" href="https://tanzhineng.github.io/2024/07/02/MySQL%E5%8D%83%E4%B8%87%E7%BA%A7%E5%88%AB%E6%95%B0%E6%8D%AE%E6%B7%BB%E5%8A%A0%E5%AD%97%E6%AE%B5%E6%88%96%E7%B4%A2%E5%BC%95%E5%AF%BC%E8%87%B4%E9%94%81%E8%A1%A8%E7%9A%84%E5%A4%84%E7%90%86/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 谭智能","link":"链接: ","source":"来源: tanzhineng","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MySQL千万级别数据添加字段或索引导致锁表的处理',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-07-14 19:40:19'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.1.1"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/./img/touxiang.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/photos/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/./img/zhuye.png')"><nav id="nav"><span id="blog-info"><a href="/" title="tanzhineng"><span class="site-name">tanzhineng</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/photos/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">MySQL千万级别数据添加字段或索引导致锁表的处理</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-07-01T16:14:00.000Z" title="发表于 2024-07-02 00:14:00">2024-07-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-07-14T11:40:19.892Z" title="更新于 2024-07-14 19:40:19">2024-07-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%9F%A5%E8%AF%86/">知识</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%9F%A5%E8%AF%86/Java/">Java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="MySQL千万级别数据添加字段或索引导致锁表的处理"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉，这个密码看着不太对，请再试试。" data-whm="抱歉，这个文章不能被校验，不过您还是能看看解密后的内容。">
  <script id="hbeData" type="hbeData" data-hmacdigest="3d7277667d493e8a61dba7c356b16a30fa3f08b9cf4fc53f8b41bbfddbea1e9c">4630436162ade97ba2718b7d0c4b3b63cb3a3f659c5ca08b4bca0f58459281868fe61354f50b4d3b28bb10f796da1b4187b90de3ccad8ae1df05d8c74b13c2e7dc836e89dcfd34459bc60f275937bbb3fe225818fb035e3fcbfe91a9330010d9d539e7e75445c0f1c3a4ea748e125720d55e4dc6790c3c0b466555003793433e48ecacf443135ed4fd182d03193ff1d1f65c64217eee8849cd9d432ade8a4bb3129eee3b75b1bd1d53e6f0d16fb348d08bc79be040cbfceb02d39cfb5384ff522a2dc2ea1d3e65ce20bad686edffd2e04d04ffda2f20495b2c0ba29cf4dbf6f7f19e38082a9bc52f0387c4597ceae163ab00616f0dad61a806366ad041b54c3cb6243905f3c1c312b75ef88cdc5c496d2cde7767fe9e510ace5c34b1ea8d13719c68d11102780467296e804928d9ae74f9af7df05080be7a63139bd4eb285a389d75bc192945d66a545302dad8ccc226b8d3f5d7c81ecadc449129f7941550260534c030a81caa1682651e051a54e2472d8ffffbdea442b42728b74a310116a72cfc2dd7ce38207ca701fcf5f9bc0e2e26d52b9d0e09967a45eaddfa92f2a91de78ed92b61a42921bbd4ccefaab9e120257282e1fa3299df01e2a1fefc66b8a23dc7e87c24a448349cfd4cb54fc0fbcf56265fa6de43d3ced1f1bf76db0543f70d77f899730ce7356e865f51c3ea39f73daaaf03e0e0dfa585788026f4b1599adfb20e6c891e0e676fde2a7c721b81b3b6077446af9f8badbc9e97fdba5cb9ef5c60a58438002b7a79057f9b9951e1a53dfe243fd6f23f1346736d4197ece60a5201d1b948f6fafb740904360837a00e3d49dc4e649163d3ce1836d09362247afb3ad3474597b2fff120d301dfb69f6f53693287e7b86eac0a8f20f31a2049a96cc9f7ba29203b8a991bab0589203acdb4d900e6ccd4c5f8e39e8a6a4404a2a3b59fbf2ce2d183458737b308a156562bcd19a1380cc6d9acd96be89831ac1bb2cddfc8939bf587d83839434fcf551d0d0d86820f16cc42d8f252a7332ac1f0daff0618d06f60f1e5dd85310e4185f915787c5441111893a2ff4459bba195638c5905bd6fac66425db08bb90959691f193bc15ac278722f5a040b8368997c828c7a9bd618d08219faf37dbe0c3ca4a791a7f041322c714839fafaa99948e986612d921a0496ecac2153ca5967f0e59bc0badc07a7c3fe6e3dd1d622b1f67171386d332676de18cc5b42d54625a11b35e0c228965ba0721fab076e63d3694b7b9d5feb9c36c016efa8c3c51d1fe26f5ce23dc1c7547b607b01a8161e60b72ada90a2ec5bc55918c19656667ed34539030b763eed1a1341791b5143bfcd226640134a929bfbc803a7a368f4fd2c6d736282e10b817a239a4353559b8d6bc0bb9b76bf12e0013a8169236221fae71a5a3d14eb0ee32fa417adfecbc7275fa8ff3caece243a2d4f85ddbec28b697f85f6029e2d4fc8f86a8280185b2e895d1797f567d79ef5375b32ad989f745ccbe41474ab710f5d11f600fe6aeaf9898ef336371260b0c6dd8cf8fe6899f1621393162c348ab9fa59cacd19b2d2346a8f51ecb5fc415c9ac8291a6bec02971e7e65d28be201db3cf913d19d42ed51301be5c110737aaffc75ebcd60540ba2ad406f805af1fe42e7880fed8d921e186a34158fbea685355899d1e450ae24e6a858e0d6574cebce2b587445bbbc4b1f9297fe28cec4cbdfca27e8221f314baf89be38d31910d7f071073fc80770057d9c98bb2d1e59463d325ef1b489e4c1c152b6729ad5310d4509095f36c9c428339476516d2855dd8ecbea73dbd8c4e483fe6c07ced6295b64792f57b1802e87261aa991bcb828b7af748aa5fa793231055f4929daaa32361ca9d8c8cdcbf45adb682e53a6ef8f82b73687e9d1e07ef90c09e92028494f39f21dfa7032e280e09c30380d876e4bfff93d28b4de6239cb965b15de094f9cf0debcefcafac8f37a1a97c1cae056f71588b517e0db27f5350854a25f4f74ef3f7877e402c2f654e14cd2b4442362e12579cbd61f4dd2b23adfed7782b58da48c2a187afce2cff3b587c20d250b638815da0fff1f7c0b0d5e0cb1300c616e6d9ff8059e4195634a31754c55b7262620c9c18da06ec5c2a5ea14839aef999218f7cae730a328b392fa9155f2647f358a08607488d07642b046e54ef696874d7e6a9cc449edb7228f5f00ae40a9714295487b5a17738c587dad434e1b535ca70b8483a134473f48005d215ff75ba86e18714bfbb78db4ce4c9b5ce7e436391de99c044536613c54d07935b1390e24f8154c1e5a43fe2ab37d1a020286053207dafaac3729f6f05abf7df9585fb64faa65238d1821bb0d5fe4f4430536eccfe87a51bd1ece83f924c6a2e552039dee727a1c76da5c46d24887476bfccbec660d87c4d4be40e017e5036f844c17724ea38b2ce84b68b7aca55f003dacc5c864b4a75e68e7a9202de33da690fc3c0f250e807f4f29e9890e58e416140b45d6178414b5a81be7e61b0d330403e51eac91dfc4c78a5f793108e48fe43b4b810e425c583aae4aa566395afe4573de82b61d0aa834cae10199c010c31ec90d7f51b0da6d4df38062cee4b78b307e99f4849f29a102228446ed3a068d2331088ba791af75747ce13290ff1f9679879be1ef37039468dacab117f89bbd9d474813f227ae5acc413644eef2c099ce8c610f5c346c38d6b19b75a22d9c3cfb640028cb3a08311387b8f5aca843f8694b02b7938d2be664232d995c48496b96b8ac9264df19409c5d90e6781d025459dc9030d2e31ca0a7f2b536665022de2f844d44719b396690dfece61c56a52a3565d891fc47688d85a750a26bf8dd76caf1f1e7178acd667a097bc95092bd45f2e44275c13fd4cc8b5c68ab19f05f8e12e95b3d5f3e74a9f62fd0b9daaaacbcb1ad0954a769576eded1b9f44315e85215597fc793a53951c04c05f1955889bf86af128caf5af8cbf1370d779c89c6c2f7b20d980421b451160376bdec822f0dd98ee4131f20566c5865832f9c054f0b54759c8a62077ce1990db3cfab76ed9d689f75f36d6e674b3d901a11c8f69f26c436f6323cc6264e2722251a374e1c14871ce620acc5e37a03a0081ba8e0d1c67012872ca598b31c7e5cbc79d6d608117eee136fe9011e37a17efd02f09ef023a954e53c435ad05324ba1e899bb3eeafa8e1ec25c26bb75a8f17c81d07da27fe9c8dad8b74575130f2612da335afc0e45f490348a38a80edb37293c394e13a17d76b64fa23b988b686900cda5a219d93c65cf88c000fc00c7489da2f0cf083aac67495f7e4e658a83ac21bda8991b766021f8c744b014d346cef4029c1d5c4a52cb244422b22b2c9accf61aebcf3759df0c8ad9a3950d15065dc552cb544a3c22ee43e401a46307391908bb290c087a010f5d25727aadcdb930200c7c8fc8541136e333905b9581c0cf69b8a61262dac6914634133ac455ac553bfeb5fa6c14520b0db3ed3df83366777b416a165e2823e6b14645827ea6f6051210ecd1d80e45f605ae35da95ddf2f439dffaa8145d0bf203c088abce57a9e5d4cd3a4f18020f09b58514b86d13885a46a556de817113c2d2a9b3b07cb5344f7c4f2a93619cd8e9cc320039212aa9d36f8345f7b535069910c77d48fd7e24e46f9c2bfc6b143b5ed0c0d3f0eda703dc5f1e8afa97e85c68fdd652854103307ad9e786609c0331d7784c59a3a87f0d825e510f7321347a0b675c0df1fbb1650fc4b5eaa092bf5940f5bfbfa562e65ac02187efe4302755970638bd2f2204ba465d20e90e875cc140cae94188d8cd3419e7ec4984f0e5d30b5694915fee9954b037f38efff4a64d8269053ceb60f5de75355e6e3a07f1217b2a2a89bd2ef497aea1c537e1da5c56c4c491fe3b828a79985ecbfba28fd26c149155d39b704677eb99468e3b5bbccd03abb274d4eb6be4fbc9472115cbc16c106c0ff36940589ad150e3e6d2136552aa375ddc3bc9cbf7a29ef6fda38f4c4e14d7581b389b972a0a34d1adececb2e803ee0df9dac8edda613df1c09ff545fc11b2c08de213086bad41c906ef6a6b1cbd078022f829109e6bfeab928e090835e394cdf635505ce46a392e1d220ab3a4add883294b907f4a592134391501c03e86586cbadcfc05518b7dc94a47e3c66c0668e64e6b45e6486e42027df8486a4d92604591c3107c1d6142335fe953b4f626d798f4ec9e4203490ae077d20250fe6fe70646be8772dddf39a4e761df1df9c08c5374c00a7e93c3b1b2367f9dba226d9706fcad254609e000abf924708838b1bce65e7b2f7f30a209561617df6c00649072d8b7d496218d35f96248b653fc3fdc0b3dd69c09f3310574226b46cef090753292a670d9249f45e790cd3029a997838f60f5ff0d4dc9234a0d3656b17cf04a308019587451bd116d36d4ed67ed306abfb2d252210437d06df193e9d371f8d1c6b5d39a3f806573668038c7e683762e49c1b5be24b73afe165e1b6de7e2c095885c4a5beada38643128784b0e10d578bb19d5e73b50602e1ef1d078463e4ffae4b1087596b57517d59ea85463b391a97a5991df37f6875502babad7ac29c8dc4a3fad464635f9cb2d4bbb277d038c93ed9b7c2a95bf801ed78f4d4ccae7b181c4232812a51d87b6a90d7a80d1312709e174bf48618fdff6283f106600ef508b3d401396853ac63ecb60c3fa471cb4e8fc7d42f94e8098d8b6098f574aa086d66b7ce97ccf2fb17635796f367987a4db8027ba9a2a855775cb86279c0303ca9caec38a239b5a53c86bbbe8212b9bb5f7e8bb4a5ae69e7a6143515c742729bc40e3b16b29c4079e30c51fd7c6e0e2dc6d7ed1d77e2ea5d4cac3aa2ee5c98d8496dedce88e031a8dfc7ab7c68be34f2d695ef339c9237825a04859b806ce368d773da9b2f054576d7bc6f87ab7b364f8eda4dfe6ea03d9dba5302c79b84e4d82b9e246a6f669a507c4e26e4047165be43eaf03f114197fbb3062e83b30b6850354832710cb1f2dd51dfa62efc2396a17da72f05a7da9ec5f735279d849bbdc0335c2a0e31ced20de2d9e007930e0ee65a3a8cb34a6084a3823e6016df2c06ce92c0f43fa689aa95ef0980ca0484fb7e474213a4d2a75c809ab764b4110d75f4b525eec66ed5a483d59ed05761e16358a779c886412c7e35d8c18678926768c12550c394694a8521968b60920f9051df80c5ebe2bb0ed1c8f0480c721e26a97ef795fe53f6d7ecccfafa158b2e5770e4a47b280a55bbf2da530afae36a9e6eb5c8bfda75dfff771cc10cdc4e29f128b312bd7b8ff0ebe5e7aa21f1e23dacfb55f36bd78b79c02b2c10d8c23bf26880d90b4a71d94b92b265d3c3264a8e0fc0d67af0c169cd3eb9a265237872015411b7748d7f1c2faa3fbd8145e1d5f725cf03f43ab6830bc142000e98ebd08fad31c00f3867d470911c19c153286d4b076e4cac1a474e781e281111abae35264a7fc7ac591cd2e756b20171002a7d0bb1ef903fa0acc31b909f0852f600fc84b37161abaea5775deb8971f7646ed6c4bf0e81ff4bf30c4038002785b703815bdcefbcbed1cc25a8c99b4bef92e6c931d99a456e95d443ed4fa57da5762e56be200dfbd4bc33a506051e8dbc94e2ed24bd512d9416fc19ca52a48b2d7be5fb94cdfc1eef938f159ee6c0ef2015bdd2fd55e7d15d6b9f50f55fd5d8d173df78d63aa99d6d04b6e4b75f578725cd65821697c7a0eb198f38967357fd9b8f73ca2fc0206df1e94c3ba3572f58a2789aa07de0832b4b899b1194656eff484a01866a9fe6734abc3161da6e63cb628b0ff8874e4192414444fcd2cb23e2f108337612f47edb52ec2669a64e005e6e2cdc8ad372bbc7e2a07cc4e761369308e212d236472641c303e566b2532b46ae02f6189a761728ac4708a1b8e735efd8dd4831759e845cedaa8101cb1b05dc00e0da69e148297ee6717d22c5e2cd88d61df15d7beb7885827df6a24abbfcf7ad31c9c12f382eeb3dd60f03b209d9961859e89ac223d7a5bf1fe163ebf11f5be921cf27016a0d3e8a9ff194d2f1d7a6f1faa15557ac83208a2bfeb2911d6d67a9ea033c7bbbc7f9d5caafed869f592e9b64af35b53eca2f4b7c5e10a98aff36fa70e747d9d0bc548fd74a73a22d3715b6d31ce2c0575189fef89be2d7ca6b8e6c28afc4c3e8132190de051ad50ce9ff08aad60bf9c71455f69180a647227656bc734e289a313f404bdd5e9e63af20d8517d8061e0c3fba5b438e1fdb2a5106be1be66b100ef7132f6d32c64fb2cd300ba15f3063ef7873d9d09e80382240bb97ddf9f7775f863440312f10a843c32d206b7543e5f08d74daf431cdc95b52ab507d1ca2e835da979aab8c5ffe2ea1dbc2bb67f82545624fee5938dfcf1bed18071a1f422c1cbbcda6c0e489b2e0e458298a89dbb4b2ea576fb62573f9ebc9150f4c7ba1dfc4a9d4ba9a19dff4de7c877c4f420c34523765c1f4778cc40228e8e9eac741e738a9367b19e9d23e1bd3ee1f7d1a143193ef7754c8a4089c6fcb8bec7b54d3fa7542a1a2cb06164c312fa81555f132d6dd5e6eeaf26bb5aa5c56a83f3fc6fbc7b5d7626fc1ef447b500b7263c2cb22105569132b55578038c27ddbddde7379a27cd759b17323e12e9bd9215ac3e54a5a1da5f227020b3938e1d5b39b26bacec53f2702d5dfaee68de803f642f3c60547d805866083ea9e1059372f9c0f08d3cfa903ae0a233640ee54178950ad3cc07f10e79833faebef649e4019546e86b3aa0438ecbce682f5b49e0384fb4b75c19b041ee4e01c1f29c5d1b7ce2bc7a729bd9c67d2d83dfe843d817f0893b74448aba47cf9e0a9733132956124f200ca33554d4725b221709cc4c4d06837400d5000ce29c39945d23f7f5b9b28eb42e3b21e0a6fad6e5834ea6231b7d74ed196489530aba16350299c9e6b6f1400734ced07e2ef4003a2506764912d85486dbb0aa4342991a53886b1fe57e9d3ddff405fbe6f6365890bec6436a27802ef3e95ace31d1e7fd3255e1c78ea797499dc158a534b874bb3ac0ecbd07f5951af2aae4e0da9a940a40a0bcb3dd2fa0bc6d4717299336addf53feb51a202f79c315c0e6bd929fac875b4c7e40133aaa1ddfab74e01e715c4d058de78bb096fbda73e47fc80eb9bf265d57af458fe23af641f544482d1a7d96068afad784309c5f24d41ef10c5f97fffb0996e5961a79001b13ee0b9a772de42046fc5685300b203f108fe0dde6615ab9fa3e76d93e938704473c3b7ca773f94c9fea180707216b59ba9b2d4b2d7f98411f5aee6e83d049aa430d6c0a36918c87f3f30b88f4003d5fad5d73c16b9f6f573635ac2bc3264cfca0b5dc704fd80daf228fd6886b76aac47ab0fe4dc8a13990e017654c2764ac9c244602585436d3d0e6497a72751e495a05bd942aa39388e86d9efc676623b4e933a274cdbc3b25e80aff7c432ddf78184193ca04c66d579163ddd2d0f0e6c22e4f18f41440bde589999904066cd429773094b7904ee3793ef3f854a96a7a400b39324021c827716b8538d5b923b17a35906704bc41f1ab5393ab7002143cb0a7dc8f0e1f6067d9de1f94a2907ecb19155e4e0a940d0b7c8ec173af9b30b062645961609fa0ee9538910cf5f5a3a09cb3338f7e4178e48491b937698cecd0c1811c6f045d53d06410066aced9c2ba2403be5279139b440265f7b009215e03594fdb48b1fc4521a41d54d17b921ab8f9282a49279f556a5104cfa9c31ddb413f6afbf78ddb5e7194bfbe0041e7dc2d7c87c7c79b8a86e667aa1594a230019b6657534f4c772fcdeb72ee1ef51ef3f037d792e683a038b487ed4972db0b95f96e1ae735a96042197dd389ddb5dee09f77915c3cde7971cb2a9b3345c07357a0f639a74193ad75f2d3e2716c880ab5663600aa19c096b6ebd3083eccc67aa8580cb7338be6171c50c599707342b238bb80004f16496244b3b64f8262c43cafbb91e839621f5ddb6e17e575a9ba270013a37b39e3385fd4ab25f2a29399a3f5022547d18c7f9a72969a6a900c69ae02bc12d2f5d8eef43f80941ea26d777f39668ed6fe7ca0a6ed0e8ca0714e7ab903fc5c7a2b6af3cb0792ad9af9690d41f8cacaa0c93cd95ed872b5a97c57b6f4b167e8cbdadca058e2f924bf875d000008b90ba392e8467469012d7c1f23560196ef7ecb5ce4a0c74e724ed8f251e00ffe8a4d5e5417a8d9a346a1ab1d438249dad35eacc8770f6bd12901a2d789deb93ff87883fe48d72585eed9c93895c5cc7f59694c1db4f68d465fc05108423f81c9b7d7a28d989f69f57204597c63a9a2288b6751dfa8bc5eaba6495921bd4ad69a0408fef0f5b705dd755e2dbc3c4dda2768fbc4a7d5db6b66ca9d349a064ba706bbad01110ae13eebb97b761ef25b18757a1c89ba782e788fb6e82f31f0149e0e76247d0729a1a101d01229f31d58a977b0b3e03803e6c583b5ec262e7209b146abf4ea2b41ac58a2ce15464a84f52154f61c56309726acd1be612d048bc83ff3b32e79141b0953baa4f9f96dc32463be11d0e1efd12080f244f2f35651150777b6ca8f0dde8b9e05c27fab19f91f986411</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">您好，这里需要密码。</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css"></article><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/./img/touxiang.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/07/03/MySQL%E7%B4%A2%E5%BC%95/" title="MySQL索引"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">MySQL索引</div></div></a></div><div class="next-post pull-right"><a href="/2024/07/01/Arthas%E9%98%BF%E5%B0%94%E8%90%A8%E6%96%AF/" title="Arthas阿尔萨斯"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Arthas阿尔萨斯</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/./img/touxiang.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">谭智能</div><div class="author-info__description">博客</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/tanzhineng"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/tanzhineng" target="_blank" title="Github"><i class="fab fa-github" style="color: #hdhfbb;"></i></a><a class="social-icon" href="mailto:xxxxxx@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #000000;"></i></a><a class="social-icon" href="phone:xxxxxx" target="_blank" title="phone"><i class="fa-solid fa-phone" style="color: #000000;"></i></a><a class="social-icon" href="wechat:xxxxxx" target="_blank" title="Wechat"><i class="fa-brands fa-weixin" style="color: #000000;"></i></a><a class="social-icon" href="http://wpa.qq.com/msgrd?v=3&amp;uin=1027195710&amp;site=qq&amp;menu=yes" target="_blank" title="QQ"><i class="fa-brands fa-qq" style="color: #000000;"></i></a><a class="social-icon" href="https://tanzhineng.github.io" target="_blank" title="blog"><i class="fa-solid fa-blog" style="color: #000000;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content toc-div-class" style="display:none"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL%E5%8D%83%E4%B8%87%E7%BA%A7%E5%88%AB%E6%95%B0%E6%8D%AE%E6%B7%BB%E5%8A%A0%E5%AD%97%E6%AE%B5%E6%88%96%E7%B4%A2%E5%BC%95%E5%AF%BC%E8%87%B4%E9%94%81%E8%A1%A8%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">MySQL千万级别数据添加字段或索引导致锁表的处理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81MySQL%E6%B7%BB%E5%8A%A0%E5%AD%97%E6%AE%B5%E6%88%96%E7%B4%A2%E5%BC%95%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E9%94%81%E8%A1%A8"><span class="toc-number">1.1.</span> <span class="toc-text">一、MySQL添加字段或索引为什么会锁表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%87%BA%E7%8E%B0%E9%94%81%E8%A1%A8%E6%97%B6%E8%AF%A5%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86"><span class="toc-number">1.2.</span> <span class="toc-text">二、出现锁表时该怎么处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E6%9F%A5%E7%9C%8B%E6%97%A5%E5%BF%97"><span class="toc-number">1.2.1.</span> <span class="toc-text">1、查看日志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BA%BF%E7%A8%8B"><span class="toc-number">1.2.2.</span> <span class="toc-text">2、查看数据库线程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E7%BB%93%E6%9D%9F%E7%BA%BF%E7%A8%8B"><span class="toc-number">1.2.3.</span> <span class="toc-text">3、结束线程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81MySQL%E5%8D%83%E4%B8%87%E7%BA%A7%E5%88%AB%E6%95%B0%E6%8D%AE%E6%B7%BB%E5%8A%A0%E5%AD%97%E6%AE%B5%E6%88%96%E7%B4%A2%E5%BC%95"><span class="toc-number">1.3.</span> <span class="toc-text">三、MySQL千万级别数据添加字段或索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#mysql%E7%89%88%E6%9C%AC5-6%E4%B9%8B%E5%89%8D%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">1.3.1.</span> <span class="toc-text">mysql版本5.6之前的处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mysql%E7%89%88%E6%9C%AC5-6%E4%B9%8B%E5%90%8E%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">1.3.2.</span> <span class="toc-text">mysql版本5.6之后的处理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-number">1.4.</span> <span class="toc-text">四、总结</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/04/MySQL%E4%B8%ADexplain%E8%AF%A6%E8%A7%A3/" title="MySQL中explain详解">MySQL中explain详解</a><time datetime="2024-07-03T16:14:00.000Z" title="发表于 2024-07-04 00:14:00">2024-07-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/03/MySQL%E7%B4%A2%E5%BC%95/" title="MySQL索引">MySQL索引</a><time datetime="2024-07-02T16:14:00.000Z" title="发表于 2024-07-03 00:14:00">2024-07-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/02/MySQL%E5%8D%83%E4%B8%87%E7%BA%A7%E5%88%AB%E6%95%B0%E6%8D%AE%E6%B7%BB%E5%8A%A0%E5%AD%97%E6%AE%B5%E6%88%96%E7%B4%A2%E5%BC%95%E5%AF%BC%E8%87%B4%E9%94%81%E8%A1%A8%E7%9A%84%E5%A4%84%E7%90%86/" title="MySQL千万级别数据添加字段或索引导致锁表的处理">MySQL千万级别数据添加字段或索引导致锁表的处理</a><time datetime="2024-07-01T16:14:00.000Z" title="发表于 2024-07-02 00:14:00">2024-07-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/01/Arthas%E9%98%BF%E5%B0%94%E8%90%A8%E6%96%AF/" title="Arthas阿尔萨斯">Arthas阿尔萨斯</a><time datetime="2024-06-30T16:14:00.000Z" title="发表于 2024-07-01 00:14:00">2024-07-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/06/15/Swagger2/" title="MySQL索引">MySQL索引</a><time datetime="2024-06-14T16:14:00.000Z" title="发表于 2024-06-15 00:14:00">2024-06-15</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 谭智能</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div></body></html>